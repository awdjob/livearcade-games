const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),BOX_SIZE=20,GRID_SIZE=30;canvas.width=canvas.height=600;const box=20;let gameLoop,score=0,speed=150,snake=[{x:100,y:100}],direction="RIGHT",food=generateFood();function startGame(){score=0,window.parent.postMessage({gameMessage:!0,gameStart:!0},"*"),document.getElementById("startModal").style.display="none",gameLoop=setInterval(update,speed)}function generateFood(){let e,t;do{e=20*Math.floor(Math.random()*canvas.width/20),t=20*Math.floor(Math.random()*canvas.height/20)}while(snake.some((n=>n.x===e&&n.y===t)));return{x:e,y:t}}function changeDirection(e){e.preventDefault&&e.preventDefault();const t={ArrowUp:"UP",ArrowDown:"DOWN",ArrowLeft:"LEFT",ArrowRight:"RIGHT"}[e.key];t&&t!=={UP:"DOWN",DOWN:"UP",LEFT:"RIGHT",RIGHT:"LEFT"}[direction]&&(direction=t)}function drawSnake(){snake.forEach(((e,t)=>{ctx.fillStyle=0===t?"#f04a64":"#ffaf3d",ctx.fillRect(e.x,e.y,20,20),ctx.strokeStyle="#161b22",ctx.strokeRect(e.x,e.y,20,20)}))}function drawFood(){ctx.fillStyle="#39e75f",ctx.beginPath(),ctx.arc(food.x+10,food.y+10,8,0,2*Math.PI),ctx.fill()}function moveSnake(){const e={...snake[0]};"UP"===direction?e.y-=20:"DOWN"===direction?e.y+=20:"LEFT"===direction?e.x-=20:"RIGHT"===direction&&(e.x+=20),snake.unshift(e),e.x===food.x&&e.y===food.y?(score+=10,document.getElementById("score").innerText=`Score: ${score}`,food=generateFood(),speed>50&&(speed-=5),clearInterval(gameLoop),gameLoop=setInterval(update,speed)):snake.pop()}function checkCollision(){const e=snake[0];(e.x<0||e.x>=canvas.width||e.y<0||e.y>=canvas.height||snake.slice(1).some((t=>t.x===e.x&&t.y===e.y)))&&(window.parent.postMessage({gameMessage:!0,score:score},"*"),document.getElementById("gameOver").style.display="block",clearInterval(gameLoop))}function restartGame(){snake=[{x:100,y:100}],direction="RIGHT",score=0,speed=150,document.getElementById("score").innerText="Score: 0",document.getElementById("gameOver").style.display="none",food=generateFood(),gameLoop=setInterval(update,speed),window.parent.postMessage({gameMessage:!0,gameStart:!0},"*")}function update(){ctx.clearRect(0,0,canvas.width,canvas.height),drawFood(),moveSnake(),drawSnake(),checkCollision()}document.addEventListener("DOMContentLoaded",(()=>{window.parent.postMessage({gameMessage:!0,gameReady:!0},"*"),document.getElementById("startButton").addEventListener("click",startGame),document.getElementById("restartButton").addEventListener("click",restartGame),document.getElementById("upBtn").addEventListener("click",(()=>{changeDirection({key:"ArrowUp"})})),document.getElementById("downBtn").addEventListener("click",(()=>{changeDirection({key:"ArrowDown"})})),document.getElementById("leftBtn").addEventListener("click",(()=>{changeDirection({key:"ArrowLeft"})})),document.getElementById("rightBtn").addEventListener("click",(()=>{changeDirection({key:"ArrowRight"})})),document.addEventListener("keydown",changeDirection)}));
//# sourceMappingURL=script.min.js.map
